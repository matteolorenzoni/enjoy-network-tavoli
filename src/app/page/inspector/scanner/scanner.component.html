<section class="flex flex-col items-center">
  <div class="w-full pb-8">
    <en-button
      buttonName="scan-button"
      [buttonText]="lblButton"
      buttonType="submit"
      [buttonIsDisabled]="false"
      palette="primary"
      [isLoading]="false"
      (customClick)="onResetParticipation()"></en-button>
  </div>

  <div class="h-[70vh] w-full max-w-lg overflow-hidden rounded-lg">
    <zxing-scanner
      *ngIf="!participation"
      [(device)]="currentDevice"
      (scanSuccess)="onNewParticipation($event)"
      [formats]="formatsEnabled"
      (permissionResponse)="onHasPermission($event)"
      (camerasFound)="onCamerasFound($event)"></zxing-scanner>

    <div
      *ngIf="participation"
      class="flex h-full min-h-fit w-full flex-col items-center justify-evenly overflow-scroll p-4 text-center text-white"
      [ngClass]="{ 'bg-red-500': !isInScanRange, 'bg-emerald-600': isInScanRange }">
      <fa-icon [icon]="isInScanRange ? checkIcon : exclamationIcon" class="pb-4 text-8xl"></fa-icon>
      <p class="max-w-full truncate text-4xl">{{ participation.props.name }}</p>
      <p class="max-w-full truncate text-4xl">{{ participation.props.lastName }}</p>
      <br />
      <p class="max-w-full truncate text-2xl">{{ participation.props.phone }}</p>
      <br />
      <br />
      <p *ngIf="participation.props.scannedAt">
        <span class="font-bold underline">Ora entrata</span> <br />
        {{ participation.props.scannedAt | date: 'HH:mm:ss' }}
      </p>
      <p *ngIf="!isInScanRange">
        <span class="font-bold underline">Motivazione</span> <br />
        {{ participationNoGoodMotivation }}
      </p>
    </div>
  </div>
</section>
